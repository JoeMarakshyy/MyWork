{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/completed.js","src/resources/value-converters/date-format.js"],"names":["App","fetchConfig","activate","configure","configureRouter","config","router","addPipelineStep","title","map","route","moduleId","name","auth","authConfig","baseUrl","loginUrl","tokenName","authHeader","authToken","logoutRedirect","debug","testing","window","regeneratorRuntime","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","loginError","message","showLogin","login","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","console","log","error","showRegister","firstName","lastName","registerError","save","serverResponse","List","todos","showList","showCompleted","priorities","parse","getItem","getUserTodos","_id","todosArray","logout","removeItem","createTodo","todoObj","todo","description","dateDue","Date","userID","priority","back","saveTodo","alert","todoId","filesToUpload","length","uploadFile","editTodo","deleteTodo","completeTodo","completed","toggleShowCompleted","changeFiles","Array","push","files","removeFile","index","splice","globalResources","DataServices","http","BASE_URL","httpClient","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","method","url","status","get","fetch","json","data","put","content","body","object","e","code","statusCode","statusText","post","delete","uploadFiles","formData","FormData","i","append","that","Todos","TODO_SERVICE","id","Users","USER_SERVICE","FlatPickerCustomElement","Element","defaultBindingMode","twoWay","element","bind","defaultConfig","altInput","altFormat","wrap","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","undefined","setDate","CompletedValueConverter","toView","array","filter","item","DateFormatValueConverter","format"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject} from 'aurelia-framework';\nimport {FetchConfig} from 'aurelia-auth';\nimport {AuthorizeStep} from 'aurelia-auth';\n\n@inject(FetchConfig)\nexport class App {\n\n  constructor(fetchConfig){\n    this.fetchConfig = fetchConfig;\n  }\n\n  activate(){\n      this.fetchConfig.configure();\n  }\n\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep('authorize', AuthorizeStep);\n    config.title = 'ToDo';\n    config.map([\n      { route: ['', 'home'], moduleId: './modules/home', name: 'Home' },\n      { route: 'list', moduleId: './modules/list', name: 'List', auth: true },\n      { route: 'form', moduleId: './modules/form', name: 'Form', auth: true }\n    ]);\n  }\n}","var authConfig = {\n    baseUrl: \"http://localhost:5000/api\",\n    loginUrl: '/users/login',\n    tokenName: 'token',\n    authHeader: 'Authorization',\n    authToken: '',\n    logoutRedirect: '#/home'\n  }\n  \n  export default authConfig;\n  ","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from './auth-config';\nimport regeneratorRuntime from 'regenerator-runtime';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-auth', (baseConfig)=>{\n      baseConfig.configure(config);\n    })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport { Users } from '../resources/data/users';\nimport {AuthService} from 'aurelia-auth';\n\n\n\n@inject(Router, Users, AuthService)\n\nexport class Home {\nconstructor(router, users, auth) {\nthis.router = router;\nthis.auth = auth;\nthis.loginError = '';\nthis.users = users;\nthis.message = 'Home';\nthis.showLogin = true;\n}\n    login() {\n        return this.auth.login(this.email, this.password)\n          .then(response => {\n        sessionStorage.setItem(\"user\", JSON.stringify(response.user));\n        this.loginError = \"\";\n    \n   this.router.navigate('list');\n})\n.catch(error => {\n  console.log(error);\n  this.loginError = \"Invalid credentials.\";\n});\n};\nshowRegister(){\n    this.user = {\n        firstName: \"\",\n        lastName: \"\",\n        email: \"\",\n        password: \"\"\n        }\n        this.registerError = \"\";\n        \n    this.showLogin = false;\n    \n}\n\nasync save() {\n    console.log(this.user)\n          let serverResponse = await this.users.save(this.user);\n          if (!serverResponse.error) {\n            this.showLogin = true;\n          } else {\n            this.registerError = \"There was a problem registering the user.\"\n          }\n    }\n    \n\n\n}\n\n\u000b\n\n\n","import { inject } from 'aurelia-framework';\nimport {Todos} from '../resources/data/todos';\nimport { AuthService } from 'aurelia-auth';\n\n@inject(Todos, AuthService )\nexport class List {\n\n\tconstructor(todos, auth){\n\t\tthis.todos = todos;\n\t\tthis.auth = auth;\n  this.showList = false;\n  this.showCompleted = false;\n  this.priorities = ['Low','Medium','High','Critical'];\n\t\tthis.user = JSON.parse(sessionStorage.getItem('user'));\n\t\tthis. showList = true;\n\n}\n\nasync activate(){\n  await this.todos.getUserTodos(this.user._id);\n  console.log(this.todos.todosArray)\n}\n\n  logout(){\n    sessionStorage.removeItem('user');\n    this.auth.logout();\n}\n\ncreateTodo(){\t\n  this.todoObj = {\n    todo: \"\",\n    description: \"\",\n    dateDue: new Date(),\n     userID: this.user._id,\n    priority: this.priorities[0]\n  }\nthis.showList = false;\n  \n  \n}\n\nback(){\n\nthis.showList = true;\n}\n\nasync saveTodo(){\n  if(this.todoObj){\t\t\n    let response = await this.todos.save(this.todoObj);\n    if(response.error){\n      alert(\"There was an error creating the ToDo\");\n    } else {\n                      var todoId = response._id;\n                      if(this.filesToUpload && this.filesToUpload.length){\n                          await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\n                          this.filesToUpload = [];\n                      }\t\t\t\t\t\t\t\n    }\n    this.showList = true;\n  }\n}\n\n   editTodo(todo){\n          this.todoObj = todo;\n          this. showList = false;\n      }\n\n      deleteTodo(todo){\n            this.todos.deleteTodo(todo._id);\n        }\n    \n  completeTodo(todo){\n    todo.completed = !todo.completed;\n    this.todoObj = todo;\n    this.saveTodo();\n}\ntoggleShowCompleted(){\n      this.showCompleted = !this.showCompleted;\n  }\n  \n  changeFiles(){\n        this.filesToUpload = new Array(); \n        this.filesToUpload.push(this.files[0]);\n    }\n    \u000bremoveFile(index){\n        this.filesToUpload.splice(index,1);\n    }\n    \n\n}\n\n\n","export function configure(config) {\n  config.globalResources([\n    './value-converters/date-format',\n    './value-converters/completed',\n    './elements/flatpickr'\n  ]);\n}\n","import { inject } from 'aurelia-framework';\nimport {HttpClient, json} from 'aurelia-fetch-client';\n\n@inject(HttpClient)\nexport class DataServices {\n\n\tBASE_URL = \"http://localhost:5000/api/\";\n\n\tconstructor(http) {\n\t\tthis.httpClient = http;\n\n\t\tthis.httpClient.configure(config => {\n\t\tconfig\n\t\t\t.withBaseUrl(this.BASE_URL)\n\t\t\t.withDefaults({\n\t\t\tcredentials: 'same-origin',\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'X-Requested-With': 'Fetch'\n\t\t\t}\n\t\t\t})\n\t\t\t.withInterceptor({\n\t\t\trequest(request) {\n\t\t\t\tconsole.log(`Requesting ${request.method} ${request.url}`);\n\t\t\t\treturn request;\n\t\t\t},\n\t\t\tresponse(response) {\n\t\t\t\tconsole.log(`Received ${response.status} ${response.url}`);\n\t\t\t\treturn response;\n\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget(url) {\n\t\treturn this.httpClient.fetch(url)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\treturn error;\n\t\t\t});\n\t}\n\n\tput(content, url) {\n\t\treturn this.httpClient\n\t\t\t.fetch(url, {\n\t\t\t\tmethod: 'put',\n\t\t\t\tbody: json(content)\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(object => {\n\t\t\t\treturn object;\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn { error: true, code: e.statusCode, message: e.statusText };\n\t\t\t});\n\t}\n\n\tpost(content, url) {\n\t\treturn this.httpClient\n\t\t\t.fetch(url, {\n\t\t\t\tmethod: 'post',\n\t\t\t\tbody: json(content)\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(object => {\n\t\t\t\treturn object;\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\treturn error;\n\t\t\t});\n\t}\n\n\tdelete(url) {\n\t\treturn this.httpClient\n\t\t\t.fetch(url, {\n\t\t\t\tmethod: 'delete'\n\t\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(object => {\n\t\t\t\treturn object;\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn { error: true, code: e.statusCode, message: e.statusText };\n\t\t\t});\n\t}\n\n\tuploadFiles(files, url){\n\t\tlet formData = new FormData();\n\n        for (var i = 0; i < files.length; i++) {\n            formData.append(\"file\" + i, files[i]);\n        }\n\t\tvar that = this;\n\t\t\n\t\tthis.httpClient.fetch(this.BASE_URL + url, { \n\t\t\tmethod: 'POST', \n\t\t\tbody: formData \n\t\t})\n\t\t.then(response => response.json())\n\t\t.then(data => console.log(data.message))\n\t\t.catch(error => console.log(error));\n\t}\n}\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\n@inject(DataServices)\nexport class Todos {\n\n    constructor(data) {\n\t\tthis.data = data;\n\t\t\n\t\tthis.TODO_SERVICE = 'todos';\n\t\tthis.todosArray = [];\n    }\n\n    async save(todo){\n        if(todo){\n\t\t\tif(!todo._id){\n\t\t\t\tlet response = await this.data.post(todo, this.TODO_SERVICE);\n\t\t\t\tif(!response.error){\n\t\t\t\t\tthis.todosArray.push(response);\n\t\t\t\t}\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tlet response = await this.data.put(todo, this.TODO_SERVICE + \"/\" + todo._id);\n\t\t\t\tif(!response.error){\n\t\t\t\t}\n\t\t\t\treturn response;\n\t\t\t}\n\n        }\n\t}\n\n\tuploadFile(files, user, todo){\n       \tthis.data.uploadFiles(files, this.TODO_SERVICE + \"/upload/\" + user + '/' + todo);\n    }\n\n\tasync deleteTodo(id){\n\t\tlet response = await this.data.delete(this.TODO_SERVICE + \"/\" + id);\n\t\tif(!response.error){\n\t\t\tfor(let i = 0; i < this.todosArray.length; i++){\n\t\t\t\tif(this.todosArray[i]._id === id){\n\t\t\t\t\tthis.todosArray.splice(i,1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tasync getUserTodos(id){\n\t\tlet response = await this.data.get(this.TODO_SERVICE + \"/user/\" + id);\n\t\tif(!response.error){\n\t\t\tthis.todosArray = response;\n\t\t}\n\t}\n\n}\n","import {inject} from 'aurelia-framework';\nimport {DataServices} from './data-services';\n\u000b@inject(DataServices)\nexport class Users {\n\u000bconstructor(data) {\n        this.data = data;\n        this.USER_SERVICE = 'users';\n\n    }\nasync save(user){\n    console.log(user)\n    if(user){\n        try{\n            let serverResponse = await this.data.post(user, this.USER_SERVICE);\n            return serverResponse;\n         } catch (error) {\n            console.log(error);\n            return error;\n        }\n    }\n}\n\n}\n","import {inject, bindable, bindingMode} from 'aurelia-framework';\nimport Flatpickr from 'flatpickr';\n\u000b@inject(Element)\nexport class FlatPickerCustomElement {\n\u000b@bindable({defaultBindingMode: bindingMode.twoWay}) value;\n\u000bconstructor(element) {\n  this.element = element;\n}\nbind() {\n            const defaultConfig = {\n                \taltInput: true,\n                \taltFormat: \"F j, Y\",\n        wrap: true\n            };\n    \u000b        this._config = Object.assign({}, defaultConfig);\n            this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\n        }\n\n    attached() {\n                this.flatpickr = new Flatpickr(this.element.querySelector('.aurelia-flatpickr'), this._config);\n         }\n        \u000bonChange(selectedDates, dateStr, instance) {\n                this.value = selectedDates[0] \n        }\n            valueChanged() {\n    if (!this.flatpickr) {\n        return;\n    }\n\u000b    if (this.value === this.flatpickr.selectedDates[0]){\n        return;\n    }\n\u000b    let newDate = this.value ? this.value : undefined;      \n\u000b    this.flatpickr.setDate(newDate);\n}\n}\n","export class CompletedValueConverter {\n      \n       toView(array, value) {\n         if(!value){\n          return array.filter(item => {\n            return !item.completed;\n          })\n         } else {\n           return array;\n         }\n       }\n      }\n    ","import moment from 'moment';\n\n\u000bexport class DateFormatValueConverter {\n\u000b   toView(value) {\n    if(value === undefined || value === null){\n        return;\n        \t\t}\n        \n        \t\treturn moment(value).format('MMM Do YYYY');\n        }\n}\n"],"sourceRoot":".."}